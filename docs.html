<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ConsBlock Docs</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Space+Grotesk:wght@600;700&family=JetBrains+Mono:wght@400;500&display=swap"
    rel="stylesheet" />
  <style>
    *,
    *::before,
    *::after {
      box-sizing: border-box;
      margin: 0;
      padding: 0
    }

    :root {
      --bg: #1a1d23;
      --sidebar: #14171c;
      --card: #22262f;
      --primary: #05b6f8;
      --primary-dim: rgba(5, 182, 248, .1);
      --primary-border: rgba(5, 182, 248, .2);
      --fg: #e8eaed;
      --muted: #8b949e;
      --border: rgba(255, 255, 255, .08);
      --radius: 8px;
      --mono: 'JetBrains Mono', monospace;
      --sans: 'Inter', sans-serif;
      --head: 'Space Grotesk', sans-serif;
    }

    html {
      scroll-behavior: smooth
    }

    body {
      font-family: var(--sans);
      background: var(--bg);
      color: var(--fg);
      display: flex;
      min-height: 100vh;
      -webkit-font-smoothing: antialiased
    }

    a {
      color: inherit;
      text-decoration: none
    }

    /* ── SIDEBAR ── */
    .sidebar {
      width: 260px;
      min-width: 260px;
      background: var(--sidebar);
      border-right: 1px solid var(--border);
      height: 100vh;
      position: fixed;
      top: 0;
      left: 0;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
      z-index: 50;
    }

    .sidebar::-webkit-scrollbar {
      width: 4px
    }

    .sidebar::-webkit-scrollbar-thumb {
      background: var(--border);
      border-radius: 4px
    }

    .sidebar-logo {
      display: flex;
      align-items: center;
      gap: .6rem;
      padding: 1.25rem 1.25rem 1rem;
      border-bottom: 1px solid var(--border);
    }

    .logo-box {
      width: 32px;
      height: 32px;
      display: flex;
      align-items: center;
      justify-content: center;
      filter: drop-shadow(0 0 6px rgba(5, 182, 248, .5));
      flex-shrink: 0;
    }

    .logo-text {
      font-family: var(--head);
      font-size: .95rem;
      font-weight: 700
    }

    .logo-version {
      font-family: var(--mono);
      font-size: .65rem;
      color: var(--primary);
      background: var(--primary-dim);
      border: 1px solid var(--primary-border);
      border-radius: 4px;
      padding: .1rem .4rem;
      margin-left: auto
    }

    .search-box {
      padding: .75rem 1rem;
      border-bottom: 1px solid var(--border)
    }

    .search-input {
      width: 100%;
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 6px;
      padding: .5rem .75rem;
      color: var(--fg);
      font-family: var(--sans);
      font-size: .8rem;
      outline: none;
      transition: border-color .2s;
    }

    .search-input:focus {
      border-color: var(--primary-border)
    }

    .search-input::placeholder {
      color: var(--muted)
    }

    .nav-section {
      padding: .75rem 0
    }

    .nav-label {
      font-size: .65rem;
      font-weight: 600;
      letter-spacing: .08em;
      text-transform: uppercase;
      color: var(--muted);
      padding: .25rem 1.25rem .5rem;
    }

    .nav-item {
      display: flex;
      align-items: center;
      gap: .5rem;
      padding: .4rem 1.25rem;
      font-size: .83rem;
      color: rgba(255, 255, 255, .65);
      cursor: pointer;
      transition: color .15s, background .15s;
      border-left: 2px solid transparent;
    }

    .nav-item:hover {
      color: var(--fg);
      background: rgba(255, 255, 255, .04)
    }

    .nav-item.active {
      color: var(--primary);
      background: var(--primary-dim);
      border-left-color: var(--primary)
    }

    .sidebar-footer {
      margin-top: auto;
      padding: 1rem 1.25rem;
      border-top: 1px solid var(--border);
      font-size: .72rem;
      color: var(--muted)
    }

    .sidebar-footer a {
      color: var(--primary)
    }

    /* ── MAIN ── */
    .main {
      margin-left: 260px;
      flex: 1;
      min-height: 100vh;
      display: flex;
      flex-direction: column
    }

    .topbar {
      position: sticky;
      top: 0;
      height: 52px;
      background: rgba(26, 29, 35, .9);
      backdrop-filter: blur(16px);
      border-bottom: 1px solid var(--border);
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 2rem;
      z-index: 40;
    }

    .topbar-path {
      font-size: .8rem;
      color: var(--muted);
      font-family: var(--mono)
    }

    .topbar-path span {
      color: var(--fg)
    }

    .topbar-links {
      display: flex;
      gap: 1rem
    }

    .topbar-links a {
      font-size: .8rem;
      color: var(--muted);
      transition: color .2s
    }

    .topbar-links a:hover {
      color: var(--primary)
    }

    .content {
      max-width: 780px;
      padding: 2.5rem 2rem 5rem;
      width: 100%
    }

    .page {
      display: none
    }

    .page.active {
      display: block
    }

    /* ── TYPOGRAPHY ── */
    .page-label {
      font-family: var(--mono);
      font-size: .7rem;
      color: var(--primary);
      letter-spacing: .1em;
      text-transform: uppercase;
      margin-bottom: .75rem
    }

    h1 {
      font-family: var(--head);
      font-size: 2.2rem;
      font-weight: 700;
      line-height: 1.2;
      letter-spacing: -.02em;
      margin-bottom: 1rem
    }

    h1 .hl {
      background: linear-gradient(135deg, var(--primary), #0498d0);
      -webkit-background-clip: text;
      background-clip: text;
      -webkit-text-fill-color: transparent
    }

    h2 {
      font-family: var(--head);
      font-size: 1.35rem;
      font-weight: 700;
      margin: 2.5rem 0 .75rem;
      padding-top: .5rem;
      border-top: 1px solid var(--border)
    }

    h3 {
      font-family: var(--head);
      font-size: 1.05rem;
      font-weight: 600;
      margin: 1.75rem 0 .5rem;
      color: var(--fg)
    }

    p {
      font-size: .9rem;
      line-height: 1.75;
      color: rgba(255, 255, 255, .72);
      margin-bottom: 1rem
    }

    ul,
    ol {
      padding-left: 1.25rem;
      margin-bottom: 1rem
    }

    li {
      font-size: .9rem;
      line-height: 1.75;
      color: rgba(255, 255, 255, .72);
      margin-bottom: .25rem
    }

    code {
      font-family: var(--mono);
      font-size: .8rem;
      background: var(--card);
      border: 1px solid var(--border);
      padding: .1rem .35rem;
      border-radius: 4px;
      color: var(--primary)
    }

    /* ── CODE BLOCK ── */
    .code-block {
      background: #0d1117;
      border: 1px solid var(--border);
      border-radius: var(--radius);
      overflow: hidden;
      margin: 1rem 0 1.5rem;
      position: relative
    }

    .code-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: .5rem 1rem;
      background: #161b22;
      border-bottom: 1px solid var(--border)
    }

    .code-lang {
      font-family: var(--mono);
      font-size: .68rem;
      color: var(--muted);
      text-transform: uppercase;
      letter-spacing: .08em
    }

    .copy-btn {
      font-family: var(--mono);
      font-size: .68rem;
      color: var(--primary);
      cursor: pointer;
      transition: opacity .2s;
      background: none;
      border: none
    }

    .copy-btn:hover {
      opacity: .7
    }

    pre {
      padding: 1.25rem;
      font-family: var(--mono);
      font-size: .8rem;
      line-height: 1.8;
      overflow-x: auto;
      color: #e6edf3
    }

    .kw {
      color: #ff7b72
    }

    .fn {
      color: #d2a8ff
    }

    .str {
      color: #a5d6ff
    }

    .cm {
      color: #8b949e;
      font-style: italic
    }

    .num {
      color: #79c0ff
    }

    .prop {
      color: #ffa657
    }

    /* ── CALLOUT ── */
    .callout {
      border-radius: var(--radius);
      padding: 1rem 1.25rem;
      margin: 1.25rem 0;
      border-left: 3px solid var(--primary);
      background: var(--primary-dim);
      font-size: .875rem;
      line-height: 1.7;
      color: rgba(255, 255, 255, .8)
    }

    .callout.warn {
      border-color: #f6ad55;
      background: rgba(246, 173, 85, .08)
    }

    /* ── TABLE ── */
    table {
      width: 100%;
      border-collapse: collapse;
      margin: 1rem 0 1.5rem;
      font-size: .85rem
    }

    th {
      text-align: left;
      padding: .6rem .75rem;
      background: var(--card);
      color: var(--fg);
      font-weight: 600;
      border-bottom: 2px solid var(--border)
    }

    td {
      padding: .6rem .75rem;
      border-bottom: 1px solid var(--border);
      color: rgba(255, 255, 255, .72)
    }

    tr:hover td {
      background: rgba(255, 255, 255, .02)
    }

    /* ── STEP ── */
    .step {
      display: flex;
      gap: 1rem;
      margin-bottom: 1.5rem
    }

    .step-num {
      min-width: 28px;
      height: 28px;
      border-radius: 50%;
      background: var(--primary-dim);
      border: 1px solid var(--primary-border);
      display: flex;
      align-items: center;
      justify-content: center;
      font-family: var(--mono);
      font-size: .75rem;
      color: var(--primary);
      flex-shrink: 0;
      margin-top: .15rem
    }

    .step-body h3 {
      margin: .15rem 0 .35rem;
      font-size: .95rem
    }

    /* ── CARDS ── */
    .cards {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 1rem;
      margin: 1.25rem 0
    }

    .card {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 1.25rem;
      transition: border-color .2s
    }

    .card:hover {
      border-color: var(--primary-border)
    }

    .card-icon {
      width: 38px;
      height: 38px;
      border-radius: 10px;
      background: rgba(5, 182, 248, .12);
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: .65rem
    }


    .card h4 {
      font-family: var(--head);
      font-size: .9rem;
      font-weight: 600;
      margin-bottom: .35rem
    }

    .card p {
      font-size: .8rem;
      margin: 0;
      color: var(--muted)
    }

    /* ── MOBILE ── */
    .mobile-menu-btn {
      display: none;
      position: fixed;
      top: .75rem;
      left: .75rem;
      z-index: 100;
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 6px;
      padding: .4rem .6rem;
      color: var(--fg);
      cursor: pointer;
      font-size: 1rem
    }

    @media(max-width:768px) {
      .sidebar {
        transform: translateX(-100%);
        transition: transform .25s
      }

      .sidebar.open {
        transform: translateX(0)
      }

      .main {
        margin-left: 0
      }

      .mobile-menu-btn {
        display: block
      }

      .content {
        padding: 1.5rem 1rem 4rem
      }
    }
  </style>
</head>

<body>

  <button class="mobile-menu-btn" onclick="toggleSidebar()">☰</button>

  <!-- SIDEBAR -->
  <aside class="sidebar" id="sidebar">
    <div class="sidebar-logo">
      <div class="logo-box">
        <svg width="30" height="29" viewBox="0 0 30 29" fill="none" xmlns="http://www.w3.org/2000/svg">
          <defs>
            <linearGradient id="dTop" x1="0" y1="0" x2="1" y2="1">
              <stop offset="0%" stop-color="#7ee8fa" />
              <stop offset="100%" stop-color="#05b6f8" />
            </linearGradient>
            <linearGradient id="dLeft" x1="0" y1="0" x2="1" y2="1">
              <stop offset="0%" stop-color="#05b6f8" />
              <stop offset="100%" stop-color="#0498d0" />
            </linearGradient>
            <linearGradient id="dRight" x1="0" y1="0" x2="1" y2="1">
              <stop offset="0%" stop-color="#0498d0" />
              <stop offset="100%" stop-color="#0370a0" />
            </linearGradient>
          </defs>
          <polygon points="7,2 13,5.5 13,12.5 7,9" fill="url(#dTop)" />
          <polygon points="1,5.5 7,2 7,9 1,12.5" fill="url(#dLeft)" />
          <polygon points="1,12.5 7,9 13,12.5 7,16" fill="url(#dRight)" />
          <polygon points="19,2 25,5.5 25,12.5 19,9" fill="url(#dTop)" />
          <polygon points="13,5.5 19,2 19,9 13,12.5" fill="url(#dLeft)" />
          <polygon points="13,12.5 19,9 25,12.5 19,16" fill="url(#dRight)" />
          <polygon points="7,14 13,17.5 13,24.5 7,21" fill="url(#dTop)" />
          <polygon points="1,17.5 7,14 7,21 1,24.5" fill="url(#dLeft)" />
          <polygon points="1,24.5 7,21 13,24.5 7,28" fill="url(#dRight)" />
          <polygon points="19,14 25,17.5 25,24.5 19,21" fill="url(#dTop)" />
          <polygon points="13,17.5 19,14 19,21 13,24.5" fill="url(#dLeft)" />
          <polygon points="13,24.5 19,21 25,24.5 19,28" fill="url(#dRight)" />
        </svg>
      </div>
      <span class="logo-text">ConsBlock</span>
      <span class="logo-version">v0.1.0</span>
    </div>

    <div class="search-box">
      <input class="search-input" type="text" placeholder="Search docs… ⌘K" oninput="searchDocs(this.value)" />
    </div>

    <nav>
      <div class="nav-section">
        <div class="nav-label">Introduction</div>
        <div class="nav-item active" onclick="show('intro')">What is ConsBlock?</div>
        <div class="nav-item" onclick="show('vision')">The Vision</div>
        <div class="nav-item" onclick="show('concepts')">Core Concepts</div>
      </div>
      <div class="nav-section">
        <div class="nav-label">Getting Started</div>
        <div class="nav-item" onclick="show('quickstart')">Quick Start</div>
        <div class="nav-item" onclick="show('install')">Installation</div>
        <div class="nav-item" onclick="show('config')">Configuration</div>
      </div>
      <div class="nav-section">
        <div class="nav-label">ConsBlock Engine</div>
        <div class="nav-item" onclick="show('architecture')">Architecture Overview</div>
        <div class="nav-item" onclick="show('consensus')">BFT Consensus</div>
        <div class="nav-item" onclick="show('state')">Cryptographic State</div>
        <div class="nav-item" onclick="show('peers')">Peer Discovery</div>
        <div class="nav-item" onclick="show('security')">Security</div>
      </div>
      <div class="nav-section">
        <div class="nav-label">SDK & API</div>
        <div class="nav-item" onclick="show('sdk')">TypeScript SDK</div>
        <div class="nav-item" onclick="show('api')">REST API</div>
        <div class="nav-item" onclick="show('ws')">WebSocket</div>
      </div>
      <div class="nav-section">
        <div class="nav-label">Engines</div>
        <div class="nav-item" onclick="show('bft')">BFT (default)</div>
        <div class="nav-item" onclick="show('tendermint')">Tendermint</div>
        <div class="nav-item" onclick="show('custom')">Custom Adapter</div>
      </div>
    </nav>

    <div class="sidebar-footer">
      <a href="index.html">← Back to website</a><br />
      <span style="margin-top:.4rem;display:block">© 2026 ConsBlock · Apache 2.0</span>
    </div>
  </aside>

  <!-- MAIN -->
  <main class="main">
    <div class="topbar">
      <div class="topbar-path" id="breadcrumb">Introduction / <span>What is ConsBlock?</span></div>
      <div class="topbar-links">
        <a href="https://github.com/ConsBlock/consblock" target="_blank">GitHub</a>
        <a href="index.html">Website</a>
      </div>
    </div>

    <div class="content">

      <!-- INTRO -->
      <div class="page active" id="page-intro">
        <div class="page-label">// introduction</div>
        <h1>What is <span class="hl">ConsBlock?</span></h1>
        <p>ConsBlock is an open-source <strong>BFT consensus framework</strong> for distributed systems. It gives your
          network persistent state, sub-second block finality, and fault-tolerant agreement — without the protocol
          complexity.</p>
        <p>Whether you're building a DeFi protocol, an on-chain game, or an AI agent swarm, ConsBlock provides the
          coordination primitives you need in a developer-friendly SDK.</p>
        <div class="callout">✓ Open source · Apache 2.0 · Built for Web3 and distributed systems everywhere</div>
        <div class="cards">
          <div class="card">
            <div class="card-icon">
              <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="var(--primary)">
                <path d="m13 3-8.5 9.5H12l-1 8.5 8.5-9.5H12Z" />
              </svg>
            </div>
            <h4>Sub-second Finality</h4>
            <p>BFT engine, &lt;50ms block commit</p>
          </div>
          <div class="card">
            <div class="card-icon">
              <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="var(--primary)">
                <path
                  d="M12 1 3 5v6c0 5.25 3.75 10.15 9 11.35C17.25 21.15 21 16.25 21 11V5l-9-4Zm-1 13-3-3 1.41-1.41L11 11.17l4.59-4.58L17 8l-6 6Z" />
              </svg>
            </div>
            <h4>Cryptographic State</h4>
            <p>Merkle-trie, signed, tamper-proof</p>
          </div>
          <div class="card">
            <div class="card-icon">
              <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none"
                stroke="var(--primary)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="12" r="10" />
                <path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z" />
                <path d="M2 12h20" />
              </svg>
            </div>
            <h4>Peer Discovery</h4>
            <p>libp2p, no bootstrapper needed</p>
          </div>
          <div class="card">
            <div class="card-icon">
              <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none"
                stroke="var(--primary)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <polyline points="16 18 22 12 16 6" />
                <polyline points="8 6 2 12 8 18" />
              </svg>
            </div>
            <h4>EVM Compatible</h4>
            <p>Drop-in for any EVM chain</p>
          </div>
        </div>
      </div>

      <!-- VISION -->
      <div class="page" id="page-vision">
        <div class="page-label">// introduction</div>
        <h1>The <span class="hl">Vision</span></h1>
        <p>Traditional distributed systems bolt on consensus as an afterthought — fragile Raft implementations,
          hand-rolled leader election, or black-box third-party middleware you can't debug at 3am.</p>
        <p>ConsBlock exists to change that. Our goal is a world where <strong>any developer</strong> can spin up a
          production-grade consensus network in minutes, not weeks.</p>
        <h2>Principles</h2>
        <ul>
          <li><strong>Developer-first</strong> — clean API, great error messages, TypeScript-native</li>
          <li><strong>Pluggable</strong> — swap consensus engines without touching application code</li>
          <li><strong>Observable</strong> — metrics, logs, and a dashboard included by default</li>
          <li><strong>Open</strong> — Apache 2.0, forever free, community-driven</li>
        </ul>
      </div>

      <!-- CONCEPTS -->
      <div class="page" id="page-concepts">
        <div class="page-label">// introduction</div>
        <h1>Core <span class="hl">Concepts</span></h1>
        <h2>Rounds &amp; Phases</h2>
        <p>Each consensus round goes through 4 phases: <code>PROPOSE → PREVOTE → PRECOMMIT → COMMIT</code>. A round is
          locked once ⅔ of validators pre-commit.</p>
        <h2>Validators</h2>
        <p>Validators are nodes that participate in voting. They hold ECDSA secp256k1 keypairs. Leader election uses VRF
          (Verifiable Random Function) for unpredictable, sybil-resistant proposer selection.</p>
        <h2>State Root</h2>
        <p>After every block, the state machine computes a Merkle Patricia Trie root. This root is included in the block
          header, making the entire state cryptographically verifiable at any point in history.</p>
        <h2>Finality</h2>
        <p>ConsBlock has <strong>deterministic finality</strong> — once committed, blocks cannot be reversed. No reorgs,
          no fork-choice rules, no probabilistic waiting.</p>
      </div>

      <!-- QUICKSTART -->
      <div class="page" id="page-quickstart">
        <div class="page-label">// getting started</div>
        <h1>Quick <span class="hl">Start</span></h1>
        <div class="callout">Prerequisites: Node.js &gt;= 20 and npm/pnpm installed.</div>

        <div class="step">
          <div class="step-num">1</div>
          <div class="step-body">
            <h3>Install ConsBlock CLI</h3>
            <div class="code-block">
              <div class="code-header"><span class="code-lang">bash</span><button class="copy-btn"
                  onclick="copyCode(this)">copy</button></div>
              <pre>npm install -g consblock</pre>
            </div>
          </div>
        </div>

        <div class="step">
          <div class="step-num">2</div>
          <div class="step-body">
            <h3>Initialize a new network</h3>
            <div class="code-block">
              <div class="code-header"><span class="code-lang">bash</span><button class="copy-btn"
                  onclick="copyCode(this)">copy</button></div>
              <pre>consblock init my-network
cd my-network</pre>
            </div>
          </div>
        </div>

        <div class="step">
          <div class="step-num">3</div>
          <div class="step-body">
            <h3>Start your node</h3>
            <div class="code-block">
              <div class="code-header"><span class="code-lang">bash</span><button class="copy-btn"
                  onclick="copyCode(this)">copy</button></div>
              <pre>consblock node start</pre>
            </div>
            <p>Network runs at <code>http://localhost:8545</code> · Metrics at <code>:9090/metrics</code></p>
          </div>
        </div>

        <div class="step">
          <div class="step-num">4</div>
          <div class="step-body">
            <h3>Propose a state transition</h3>
            <div class="code-block">
              <div class="code-header"><span class="code-lang">typescript</span><button class="copy-btn"
                  onclick="copyCode(this)">copy</button></div>
              <pre><span class="kw">import</span> { <span class="prop">ConsBlock</span>, <span class="prop">BftEngine</span> } <span class="kw">from</span> <span class="str">'consblock'</span>

<span class="kw">const</span> <span class="prop">node</span> = <span class="kw">await</span> <span class="fn">ConsBlock</span>.<span class="fn">create</span>({
  engine: <span class="kw">new</span> <span class="fn">BftEngine</span>({ quorum: <span class="num">0.67</span> }),
  port: <span class="num">8545</span>,
})

<span class="prop">node</span>.<span class="fn">on</span>(<span class="str">'block:finalized'</span>, (block) =&gt; {
  console.<span class="fn">log</span>(<span class="str">`✓ Round <span class="prop">${block.round}</span> finalized`</span>)
})

<span class="kw">await</span> <span class="prop">node</span>.<span class="fn">propose</span>({ data: { amount: <span class="num">100</span> } })</pre>
            </div>
          </div>
        </div>
      </div>

      <!-- INSTALL -->
      <div class="page" id="page-install">
        <div class="page-label">// getting started</div>
        <h1><span class="hl">Installation</span></h1>
        <h2>CLI (recommended)</h2>
        <div class="code-block">
          <div class="code-header"><span class="code-lang">bash</span><button class="copy-btn"
              onclick="copyCode(this)">copy</button></div>
          <pre>npm install -g consblock
# or
pnpm add -g consblock</pre>
        </div>
        <h2>SDK only</h2>
        <div class="code-block">
          <div class="code-header"><span class="code-lang">bash</span><button class="copy-btn"
              onclick="copyCode(this)">copy</button></div>
          <pre>npm install consblock</pre>
        </div>
        <h2>Docker</h2>
        <div class="code-block">
          <div class="code-header"><span class="code-lang">bash</span><button class="copy-btn"
              onclick="copyCode(this)">copy</button></div>
          <pre>docker compose up --build</pre>
        </div>
        <p>Docker starts 3 validator nodes + Prometheus + Grafana dashboard.</p>
      </div>

      <!-- CONFIG -->
      <div class="page" id="page-config">
        <div class="page-label">// getting started</div>
        <h1><span class="hl">Configuration</span></h1>
        <table>
          <tr>
            <th>Variable</th>
            <th>Default</th>
            <th>Description</th>
          </tr>
          <tr>
            <td><code>PORT</code></td>
            <td>8545</td>
            <td>JSON-RPC port</td>
          </tr>
          <tr>
            <td><code>P2P_PORT</code></td>
            <td>26656</td>
            <td>libp2p listen port</td>
          </tr>
          <tr>
            <td><code>CHAIN_ID</code></td>
            <td>1337</td>
            <td>Network chain ID</td>
          </tr>
          <tr>
            <td><code>BLOCK_TIME_MS</code></td>
            <td>500</td>
            <td>Target block time (ms)</td>
          </tr>
          <tr>
            <td><code>QUORUM</code></td>
            <td>0.67</td>
            <td>Fraction needed to commit</td>
          </tr>
          <tr>
            <td><code>MAX_VALIDATORS</code></td>
            <td>100</td>
            <td>Max validator set size</td>
          </tr>
          <tr>
            <td><code>LOG_LEVEL</code></td>
            <td>info</td>
            <td>debug / info / warn / error</td>
          </tr>
          <tr>
            <td><code>METRICS_PORT</code></td>
            <td>9090</td>
            <td>Prometheus metrics port</td>
          </tr>
        </table>
      </div>

      <!-- ARCHITECTURE -->
      <div class="page" id="page-architecture">
        <div class="page-label">// consblock engine</div>
        <h1>Architecture <span class="hl">Overview</span></h1>
        <div class="code-block">
          <div class="code-header"><span class="code-lang">diagram</span></div>
          <pre>Client App ──(JSON-RPC)──► ConsBlock Node ◄──(libp2p)──► Peers
                                  │
             WebSocket Events ◄───┤
                                  │
                     ┌────────────┴────────────┐
                     ▼                         ▼
               Consensus Engine           State Machine
             (BFT / Tendermint)          (Merkle Trie)
                     │                         │
              ┌──────┴──────┐            ┌─────┴─────┐
              ▼             ▼            ▼           ▼
           Mempool     GossipSub      LevelDB    Snapshots</pre>
        </div>
        <h2>Key Components</h2>
        <ul>
          <li><strong>Consensus Engine</strong> — pluggable BFT adapter (PBFT or Tendermint)</li>
          <li><strong>State Machine</strong> — Merkle Patricia Trie backed by LevelDB</li>
          <li><strong>P2P Layer</strong> — libp2p with NOISE encryption + GossipSub</li>
          <li><strong>Mempool</strong> — pending transaction pool with priority ordering</li>
          <li><strong>JSON-RPC</strong> — Ethereum-compatible HTTP + WebSocket server</li>
        </ul>
      </div>

      <!-- CONSENSUS -->
      <div class="page" id="page-consensus">
        <div class="page-label">// consblock engine</div>
        <h1>BFT <span class="hl">Consensus</span></h1>
        <p>ConsBlock's consensus algorithm is based on practical Byzantine Fault Tolerance (pBFT). It provides safety
          and liveness as long as &lt;⅓ of validators are faulty.</p>
        <h2>Round Lifecycle</h2>
        <table>
          <tr>
            <th>Phase</th>
            <th>Description</th>
          </tr>
          <tr>
            <td><code>PROPOSE</code></td>
            <td>VRF-elected leader broadcasts a new block</td>
          </tr>
          <tr>
            <td><code>PREVOTE</code></td>
            <td>Validators verify and cast prevotes</td>
          </tr>
          <tr>
            <td><code>PRECOMMIT</code></td>
            <td>On ⅔ prevotes, validators precommit the block</td>
          </tr>
          <tr>
            <td><code>COMMIT</code></td>
            <td>On ⅔ precommits, block is finalized and stored</td>
          </tr>
        </table>
        <h2>Timeouts</h2>
        <p>Each phase has a configurable timeout. On timeout, validators vote <code>nil</code> and the round advances.
          View-change protocol detects Byzantine leaders and rotates to the next VRF candidate.</p>
      </div>

      <!-- STATE -->
      <div class="page" id="page-state">
        <div class="page-label">// consblock engine</div>
        <h1>Cryptographic <span class="hl">State</span></h1>
        <p>All application state is stored in a <strong>Merkle Patricia Trie</strong> — the same structure used by
          Ethereum. This means:</p>
        <ul>
          <li>Every key-value pair can be proven with a compact Merkle proof</li>
          <li>The entire state is summarized by a single 32-byte root hash</li>
          <li>State roots are included in every block header</li>
          <li>Historical states are accessible by block hash</li>
        </ul>
        <h2>State API</h2>
        <div class="code-block">
          <div class="code-header"><span class="code-lang">typescript</span><button class="copy-btn"
              onclick="copyCode(this)">copy</button></div>
          <pre><span class="cm">// Read state</span>
<span class="kw">const</span> value = <span class="kw">await</span> <span class="prop">node</span>.state.<span class="fn">get</span>(<span class="str">'balance:0xabc'</span>)

<span class="cm">// Generate Merkle proof</span>
<span class="kw">const</span> proof = <span class="kw">await</span> <span class="prop">node</span>.state.<span class="fn">prove</span>(<span class="str">'balance:0xabc'</span>)

<span class="cm">// Verify proof independently</span>
<span class="kw">const</span> valid = <span class="fn">verifyProof</span>(proof, stateRoot)</pre>
        </div>
      </div>

      <!-- PEERS -->
      <div class="page" id="page-peers">
        <div class="page-label">// consblock engine</div>
        <h1>Peer <span class="hl">Discovery</span></h1>
        <p>ConsBlock uses <strong>libp2p</strong> for all networking. Peer discovery is automatic via <strong>Kademlia
            DHT</strong> — no hardcoded bootstrap list required.</p>
        <h2>How it works</h2>
        <ul>
          <li>On startup, the node announces itself to the DHT</li>
          <li>It finds nearby peers using Kademlia routing tables</li>
          <li>Block and vote propagation uses <strong>GossipSub</strong> for efficient fan-out</li>
          <li>All connections are encrypted with the <strong>NOISE</strong> protocol</li>
          <li>NAT traversal via hole-punching and relay nodes</li>
        </ul>
        <h2>Manual peer connect</h2>
        <div class="code-block">
          <div class="code-header"><span class="code-lang">bash</span><button class="copy-btn"
              onclick="copyCode(this)">copy</button></div>
          <pre>consblock node join --peer /ip4/10.0.0.2/tcp/26656/p2p/QmPeer1...</pre>
        </div>
      </div>

      <!-- SECURITY -->
      <div class="page" id="page-security">
        <div class="page-label">// consblock engine</div>
        <h1>Security &amp; <span class="hl">Infrastructure</span></h1>
        <h2>Validator Identity</h2>
        <p>Validators sign all messages with <strong>ECDSA secp256k1</strong> keypairs — the same curve as Ethereum
          accounts. All vote messages include the validator address, round number, and block hash.</p>
        <h2>Slashing</h2>
        <p>Double-voting (equivocation) is detected on-chain. Evidence is included in the next block and the offending
          validator's stake is slashed.</p>
        <h2>Rate Limiting</h2>
        <p>Proposal and vote endpoints are rate-limited per validator key. Configurable via
          <code>RATE_LIMIT_PROPOSALS</code> and <code>RATE_LIMIT_VOTES</code> env vars.
        </p>
        <h2>Message Authentication</h2>
        <p>Node-to-node messages include HMAC-SHA256 signatures with sequence numbers to prevent replay attacks.</p>
      </div>

      <!-- SDK -->
      <div class="page" id="page-sdk">
        <div class="page-label">// sdk & api</div>
        <h1>TypeScript <span class="hl">SDK</span></h1>
        <div class="code-block">
          <div class="code-header"><span class="code-lang">bash</span><button class="copy-btn"
              onclick="copyCode(this)">copy</button></div>
          <pre>npm install consblock</pre>
        </div>
        <h2>Available Methods</h2>
        <table>
          <tr>
            <th>Method</th>
            <th>Description</th>
          </tr>
          <tr>
            <td><code>ConsBlock.create(config)</code></td>
            <td>Spin up or connect to a consensus node</td>
          </tr>
          <tr>
            <td><code>node.propose(tx)</code></td>
            <td>Submit a state transition for voting</td>
          </tr>
          <tr>
            <td><code>node.state.get(key)</code></td>
            <td>Read current state value</td>
          </tr>
          <tr>
            <td><code>node.state.prove(key)</code></td>
            <td>Generate Merkle inclusion proof</td>
          </tr>
          <tr>
            <td><code>node.peers()</code></td>
            <td>List connected validator peers</td>
          </tr>
          <tr>
            <td><code>node.status()</code></td>
            <td>Get current round and phase</td>
          </tr>
          <tr>
            <td><code>node.on(event, fn)</code></td>
            <td>Subscribe to consensus events</td>
          </tr>
          <tr>
            <td><code>node.stop()</code></td>
            <td>Gracefully disconnect from network</td>
          </tr>
        </table>
        <h2>Full Example</h2>
        <div class="code-block">
          <div class="code-header"><span class="code-lang">typescript</span><button class="copy-btn"
              onclick="copyCode(this)">copy</button></div>
          <pre><span class="kw">import</span> { <span class="prop">ConsBlock</span>, <span class="prop">BftEngine</span> } <span class="kw">from</span> <span class="str">'consblock'</span>

<span class="kw">const</span> <span class="prop">node</span> = <span class="kw">await</span> <span class="fn">ConsBlock</span>.<span class="fn">create</span>({
  engine: <span class="kw">new</span> <span class="fn">BftEngine</span>({ quorum: <span class="num">0.67</span> }),
  port: <span class="num">8545</span>,
  peers: [<span class="str">'peer1.consblock.xyz'</span>],
})

<span class="prop">node</span>.<span class="fn">on</span>(<span class="str">'block:finalized'</span>, (block) =&gt; {
  console.<span class="fn">log</span>(<span class="str">`Round <span class="prop">${block.round}</span> — <span class="prop">${block.hash}</span>`</span>)
})

<span class="kw">const</span> receipt = <span class="kw">await</span> <span class="prop">node</span>.<span class="fn">propose</span>({
  data: { transfer: <span class="str">'0xabc → 0xdef'</span>, amount: <span class="num">100</span> },
})</pre>
        </div>
      </div>

      <!-- API -->
      <div class="page" id="page-api">
        <div class="page-label">// sdk & api</div>
        <h1>REST <span class="hl">API</span></h1>
        <h2>Health</h2>
        <div class="code-block">
          <div class="code-header"><span class="code-lang">http</span></div>
          <pre>GET /health</pre>
        </div>
        <div class="code-block">
          <div class="code-header"><span class="code-lang">json</span></div>
          <pre>{ "status": "ok", "block": 14823, "peers": 7 }</pre>
        </div>
        <h2>Consensus Status</h2>
        <div class="code-block">
          <div class="code-header"><span class="code-lang">http</span></div>
          <pre>GET /consensus/status</pre>
        </div>
        <div class="code-block">
          <div class="code-header"><span class="code-lang">json</span></div>
          <pre>{
  "round": 14823,
  "phase": "PRECOMMIT",
  "leader": "0xabc…",
  "votes": { "prevote": 7, "precommit": 6 }
}</pre>
        </div>
        <h2>Submit Transaction</h2>
        <div class="code-block">
          <div class="code-header"><span class="code-lang">http</span></div>
          <pre>POST /consensus/propose
Content-Type: application/json

{ "data": { "transfer": "0xabc", "amount": 100 } }</pre>
        </div>
        <h2>Read State</h2>
        <div class="code-block">
          <div class="code-header"><span class="code-lang">http</span></div>
          <pre>GET /state/:key</pre>
        </div>
        <div class="code-block">
          <div class="code-header"><span class="code-lang">json</span></div>
          <pre>{ "key": "balance:0xabc", "value": "1000", "root": "0x4f8a…" }</pre>
        </div>
      </div>

      <!-- WS -->
      <div class="page" id="page-ws">
        <div class="page-label">// sdk & api</div>
        <h1><span class="hl">WebSocket</span></h1>
        <p>Connect to <code>ws://localhost:8545/ws</code> for real-time consensus events.</p>
        <h2>Subscribe</h2>
        <div class="code-block">
          <div class="code-header"><span class="code-lang">json</span><button class="copy-btn"
              onclick="copyCode(this)">copy</button></div>
          <pre>{ "type": "subscribe", "events": ["block:finalized", "peer:joined"] }</pre>
        </div>
        <h2>Event Types</h2>
        <table>
          <tr>
            <th>Event</th>
            <th>Description</th>
          </tr>
          <tr>
            <td><code>block:proposed</code></td>
            <td>Leader broadcast a new block</td>
          </tr>
          <tr>
            <td><code>block:prevoted</code></td>
            <td>Quorum of prevotes collected</td>
          </tr>
          <tr>
            <td><code>block:precommitted</code></td>
            <td>Round locked</td>
          </tr>
          <tr>
            <td><code>block:finalized</code></td>
            <td>Block committed to chain</td>
          </tr>
          <tr>
            <td><code>peer:joined</code></td>
            <td>New validator appeared</td>
          </tr>
          <tr>
            <td><code>peer:left</code></td>
            <td>Validator went offline</td>
          </tr>
          <tr>
            <td><code>state:synced</code></td>
            <td>Node caught up after being offline</td>
          </tr>
        </table>
        <h2>Close Codes</h2>
        <table>
          <tr>
            <th>Code</th>
            <th>Meaning</th>
          </tr>
          <tr>
            <td>4000</td>
            <td>Auth timeout</td>
          </tr>
          <tr>
            <td>4001</td>
            <td>Rate limit exceeded</td>
          </tr>
          <tr>
            <td>4002</td>
            <td>Invalid message format</td>
          </tr>
          <tr>
            <td>4003</td>
            <td>Server shutting down</td>
          </tr>
        </table>
      </div>

      <!-- BFT -->
      <div class="page" id="page-bft">
        <div class="page-label">// engines</div>
        <h1>BFT Engine <span class="hl">(default)</span></h1>
        <p>Classic pBFT. Best for small-to-medium validator sets (&lt; 100 nodes). Provides deterministic finality in 2
          network round-trips.</p>
        <div class="code-block">
          <div class="code-header"><span class="code-lang">typescript</span><button class="copy-btn"
              onclick="copyCode(this)">copy</button></div>
          <pre><span class="kw">import</span> { <span class="prop">BftEngine</span> } <span class="kw">from</span> <span class="str">'consblock'</span>

<span class="kw">const</span> engine = <span class="kw">new</span> <span class="fn">BftEngine</span>({
  quorum: <span class="num">0.67</span>,      <span class="cm">// ⅔ threshold</span>
  timeout: <span class="num">1000</span>,    <span class="cm">// phase timeout ms</span>
  maxValidators: <span class="num">50</span>
})</pre>
        </div>
      </div>

      <!-- TENDERMINT -->
      <div class="page" id="page-tendermint">
        <div class="page-label">// engines</div>
        <h1><span class="hl">Tendermint</span> Engine</h1>
        <p>Higher throughput for larger validator sets. Implements the Tendermint BFT algorithm with weighted proposer
          priority.</p>
        <div class="code-block">
          <div class="code-header"><span class="code-lang">typescript</span><button class="copy-btn"
              onclick="copyCode(this)">copy</button></div>
          <pre><span class="kw">import</span> { <span class="prop">TendermintEngine</span> } <span class="kw">from</span> <span class="str">'consblock/engines'</span>

<span class="kw">const</span> engine = <span class="kw">new</span> <span class="fn">TendermintEngine</span>({
  proposerPriority: <span class="str">'weighted'</span>
})</pre>
        </div>
      </div>

      <!-- CUSTOM -->
      <div class="page" id="page-custom">
        <div class="page-label">// engines</div>
        <h1>Custom <span class="hl">Adapter</span></h1>
        <p>Implement the <code>ConsensusAdapter</code> interface to plug in any consensus algorithm.</p>
        <div class="code-block">
          <div class="code-header"><span class="code-lang">typescript</span><button class="copy-btn"
              onclick="copyCode(this)">copy</button></div>
          <pre><span class="kw">import</span> { <span class="prop">ConsensusAdapter</span> } <span class="kw">from</span> <span class="str">'consblock'</span>

<span class="kw">class</span> <span class="fn">MyEngine</span> <span class="kw">implements</span> <span class="prop">ConsensusAdapter</span> {
  <span class="kw">async</span> <span class="fn">propose</span>(block: <span class="prop">Block</span>) { <span class="cm">/* broadcast */</span> }
  <span class="kw">async</span> <span class="fn">vote</span>(block: <span class="prop">Block</span>, phase: <span class="prop">Phase</span>) { <span class="cm">/* sign + send */</span> }
  <span class="kw">async</span> <span class="fn">finalize</span>(block: <span class="prop">Block</span>) { <span class="cm">/* commit to state */</span> }
}</pre>
        </div>
        <div class="callout warn">⚠️ Custom engines must implement all 3 methods. Missing any will throw at startup.
        </div>
      </div>

    </div><!-- /content -->
  </main>

  <script>
    const pages = {
      intro: { label: 'Introduction', title: 'What is ConsBlock?' },
      vision: { label: 'Introduction', title: 'The Vision' },
      concepts: { label: 'Introduction', title: 'Core Concepts' },
      quickstart: { label: 'Getting Started', title: 'Quick Start' },
      install: { label: 'Getting Started', title: 'Installation' },
      config: { label: 'Getting Started', title: 'Configuration' },
      architecture: { label: 'ConsBlock Engine', title: 'Architecture Overview' },
      consensus: { label: 'ConsBlock Engine', title: 'BFT Consensus' },
      state: { label: 'ConsBlock Engine', title: 'Cryptographic State' },
      peers: { label: 'ConsBlock Engine', title: 'Peer Discovery' },
      security: { label: 'ConsBlock Engine', title: 'Security & Infrastructure' },
      sdk: { label: 'SDK & API', title: 'TypeScript SDK' },
      api: { label: 'SDK & API', title: 'REST API' },
      ws: { label: 'SDK & API', title: 'WebSocket' },
      bft: { label: 'Engines', title: 'BFT (default)' },
      tendermint: { label: 'Engines', title: 'Tendermint' },
      custom: { label: 'Engines', title: 'Custom Adapter' },
    };

    function show(id) {
      document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
      document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
      document.getElementById('page-' + id).classList.add('active');
      event.currentTarget.classList.add('active');
      const p = pages[id];
      document.getElementById('breadcrumb').innerHTML = `${p.label} / <span>${p.title}</span>`;
      document.title = p.title + ' — ConsBlock Docs';
      // close sidebar on mobile
      if (window.innerWidth <= 768) document.getElementById('sidebar').classList.remove('open');
    }

    function copyCode(btn) {
      const pre = btn.closest('.code-block').querySelector('pre');
      navigator.clipboard.writeText(pre.innerText).then(() => {
        btn.textContent = 'copied!';
        setTimeout(() => btn.textContent = 'copy', 2000);
      });
    }

    function toggleSidebar() {
      document.getElementById('sidebar').classList.toggle('open');
    }

    function searchDocs(q) {
      const items = document.querySelectorAll('.nav-item');
      q = q.toLowerCase();
      items.forEach(item => {
        item.style.display = (!q || item.textContent.toLowerCase().includes(q)) ? '' : 'none';
      });
    }

    // keyboard shortcut
    document.addEventListener('keydown', e => {
      if ((e.ctrlKey || e.metaKey) && e.key === 'k') {
        e.preventDefault();
        document.querySelector('.search-input').focus();
      }
    });
  </script>
</body>

</html>